<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAOS.fm | BASS STUDIO - Professional Bass Synthesizer</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Space+Mono:wght@400;700&family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- i18n Translation System -->
    <script src="/js/i18n.js"></script>
    
    <style>
        :root {
            --bg-dark: #050508;
            --bg-card: rgba(10, 20, 15, 0.8);
            --bg-glass: rgba(255, 255, 255, 0.03);
            --accent-green: #39FF14;
            --accent-green-light: #4AFF14;
            --accent-green-glow: rgba(57, 255, 20, 0.4);
            --text-primary: #F4E8D8;
            --text-secondary: rgba(244, 232, 216, 0.6);
            --text-dim: rgba(244, 232, 216, 0.3);
            --border-subtle: rgba(57, 255, 20, 0.1);
            --border-glow: rgba(57, 255, 20, 0.3);
            
            --font-display: 'Bebas Neue', sans-serif;
            --font-mono: 'JetBrains Mono', 'Space Mono', monospace;
            --font-body: 'Inter', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: var(--font-body);
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated Background */
        .bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: 
                radial-gradient(ellipse 80% 50% at 20% 40%, rgba(57, 255, 20, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse 60% 40% at 80% 60%, rgba(74, 255, 20, 0.05) 0%, transparent 50%);
        }

        /* Navigation */
        .nav-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 15px 30px;
            background: rgba(5, 5, 8, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-subtle);
        }
        
        .nav-inner {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .nav-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }
        
        .logo-icon {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-green-light));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .logo-text {
            font-family: var(--font-display);
            font-size: 1.8rem;
            color: var(--text-primary);
            letter-spacing: 0.05em;
        }

        .nav-links {
            display: flex;
            gap: 8px;
        }
        
        .nav-link {
            padding: 10px 20px;
            background: var(--bg-glass);
            border: 1px solid var(--border-subtle);
            border-radius: 30px;
            color: var(--text-secondary);
            font-family: var(--font-mono);
            font-size: 0.8rem;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover {
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        /* Main Content */
        .main-content {
            padding-top: 90px;
            max-width: 1600px;
            margin: 0 auto;
            padding-left: 20px;
            padding-right: 20px;
            padding-bottom: 40px;
        }

        /* 3D Visualization Container */
        .visual-3d-container {
            width: 100%;
            max-width: 1200px;
            height: 400px;
            margin: 0 auto 40px;
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            background: radial-gradient(ellipse at center, rgba(57, 255, 20, 0.1) 0%, transparent 70%);
            border: 1px solid var(--border-subtle);
            box-shadow: inset 0 0 100px rgba(57, 255, 20, 0.1);
        }

        #bassCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        .visual-overlay {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(5, 5, 8, 0.9);
            backdrop-filter: blur(10px);
            padding: 12px 24px;
            border-radius: 30px;
            border: 1px solid var(--border-glow);
            font-family: var(--font-mono);
            font-size: 0.75rem;
            color: var(--accent-green);
            text-transform: uppercase;
            letter-spacing: 2px;
            pointer-events: none;
        }

        /* Hero Section */
        .hero-section {
            text-align: center;
            padding: 40px 0 60px;
        }

        .hero-title {
            font-family: var(--font-display);
            font-size: 4rem;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-green-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            background-clip: text;
            margin-bottom: 15px;
            letter-spacing: 0.05em;
        }

        .hero-subtitle {
            font-family: var(--font-mono);
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
        }

        /* Control Panels */
        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .panel {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            padding: 24px;
            backdrop-filter: blur(10px);
        }

        .panel-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .panel-icon {
            width: 40px;
            height: 40px;
            background: rgba(57, 255, 20, 0.15);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .panel-title {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: var(--text-primary);
            letter-spacing: 0.02em;
        }

        /* Preset Buttons */
        .preset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .preset-btn {
            padding: 15px;
            background: linear-gradient(145deg, rgba(57, 255, 20, 0.15), rgba(57, 255, 20, 0.05));
            border: 2px solid var(--border-subtle);
            border-radius: 12px;
            color: var(--text-secondary);
            font-family: var(--font-mono);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .preset-btn:hover {
            border-color: var(--accent-green);
            color: var(--accent-green);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px var(--accent-green-glow);
        }

        .preset-btn.active {
            background: linear-gradient(135deg, var(--accent-green), var(--accent-green-light));
            border-color: transparent;
            color: #000;
            font-weight: 700;
            box-shadow: 0 5px 25px var(--accent-green-glow);
        }

        /* Knob Controls */
        .knob-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .knob-control {
            text-align: center;
        }

        .knob-label {
            font-family: var(--font-mono);
            font-size: 0.75rem;
            color: var(--text-dim);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .knob-container {
            width: 80px;
            height: 80px;
            margin: 0 auto 10px;
            position: relative;
            cursor: pointer;
        }

        .knob-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(57, 255, 20, 0.3), rgba(0, 0, 0, 0.8));
            border: 3px solid var(--border-subtle);
            position: relative;
            transition: all 0.3s ease;
        }

        .knob-container:hover .knob-circle {
            border-color: var(--accent-green);
            box-shadow: 0 0 20px var(--accent-green-glow);
        }

        .knob-indicator {
            position: absolute;
            top: 8px;
            left: 50%;
            width: 3px;
            height: 25px;
            background: var(--accent-green);
            transform-origin: center 32px;
            border-radius: 2px;
            box-shadow: 0 0 10px var(--accent-green-glow);
        }

        .knob-value {
            font-family: var(--font-mono);
            font-size: 0.9rem;
            color: var(--accent-green);
            font-weight: 600;
        }

        /* Transport Controls */
        .transport-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            align-items: center;
            padding: 30px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            margin-bottom: 30px;
        }

        .transport-btn {
            width: 60px;
            height: 60px;
            background: linear-gradient(145deg, rgba(57, 255, 20, 0.15), rgba(57, 255, 20, 0.05));
            border: 2px solid var(--border-subtle);
            border-radius: 50%;
            color: var(--text-primary);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .transport-btn:hover {
            border-color: var(--accent-green);
            color: var(--accent-green);
            box-shadow: 0 5px 25px var(--accent-green-glow);
            transform: scale(1.05);
        }

        .transport-btn.playing {
            background: linear-gradient(135deg, var(--accent-green), var(--accent-green-light));
            border-color: transparent;
            animation: pulse-btn 2s ease-in-out infinite;
        }

        @keyframes pulse-btn {
            0%, 100% { box-shadow: 0 5px 25px var(--accent-green-glow); }
            50% { box-shadow: 0 5px 35px rgba(57, 255, 20, 0.6); }
        }

        /* Export Buttons */
        .export-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .export-btn {
            padding: 15px 30px;
            background: linear-gradient(145deg, rgba(57, 255, 20, 0.15), rgba(57, 255, 20, 0.05));
            border: 2px solid var(--border-subtle);
            border-radius: 12px;
            color: var(--text-secondary);
            font-family: var(--font-mono);
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .export-btn:hover {
            border-color: var(--accent-green);
            color: var(--accent-green);
            box-shadow: 0 5px 20px var(--accent-green-glow);
            transform: translateY(-2px);
        }

        /* Visualizer */
        .visualizer {
            width: 100%;
            height: 150px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            position: relative;
            overflow: hidden;
        }

        .visualizer canvas {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div class="bg-canvas"></div>

    <!-- Navigation -->
    <nav class="nav-wrapper">
        <div class="nav-inner">
            <a href="/index.html" class="nav-logo">
                <div class="logo-icon">üé∏</div>
                <span class="logo-text">BASS STUDIO</span>
            </a>
            <div class="nav-links">
                <button id="languageToggle" class="nav-link" style="cursor: pointer; background: var(--bg-glass); border: 1px solid var(--border-subtle);">
                    <span id="languageIcon">üáµüá±</span>
                    <span id="languageText">PL</span>
                </button>
                <a href="/index.html" class="nav-link">‚Üê BACK TO STUDIO</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Hero -->
        <section class="hero-section">
            <h1 class="hero-title">BASS STUDIO</h1>
            <p class="hero-subtitle">Professional Bass Synthesizer with WAV/MIDI Export</p>
        </section>

        <!-- 3D Bass Visualization -->
        <div class="visual-3d-container">
            <canvas id="bassCanvas"></canvas>
            <div class="visual-overlay">üé∏ 3D BASS GUITAR</div>
        </div>

        <!-- Controls Grid -->
        <div class="controls-grid">
            <!-- Bass Presets -->
            <div class="panel" style="grid-column: 1 / -1;">
                <div class="panel-header">
                    <div class="panel-icon">üéº</div>
                    <h2 class="panel-title">BASS PRESETS</h2>
                </div>
                <div class="preset-grid">
                    <button class="preset-btn" data-preset="sub">Sub Bass</button>
                    <button class="preset-btn" data-preset="reese">Reese Bass</button>
                    <button class="preset-btn" data-preset="acid">Acid Bass</button>
                    <button class="preset-btn" data-preset="funk">Funk Bass</button>
                    <button class="preset-btn" data-preset="growl">Growl Bass</button>
                    <button class="preset-btn" data-preset="808">808 Bass</button>
                    <button class="preset-btn" data-preset="wobble">Wobble Bass</button>
                    <button class="preset-btn" data-preset="dnb">DnB Bass</button>
                </div>
            </div>

            <!-- Oscillators -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-icon">üåä</div>
                    <h2 class="panel-title">OSCILLATORS</h2>
                </div>
                <div class="knob-controls">
                    <div class="knob-control">
                        <div class="knob-label">OSC 1 Level</div>
                        <div class="knob-container" data-param="osc1Level" data-value="0.8">
                            <div class="knob-circle">
                                <div class="knob-indicator" style="transform: rotate(-45deg);"></div>
                            </div>
                        </div>
                        <div class="knob-value">0.8</div>
                    </div>
                    <div class="knob-control">
                        <div class="knob-label">OSC 2 Level</div>
                        <div class="knob-container" data-param="osc2Level" data-value="0.6">
                            <div class="knob-circle">
                                <div class="knob-indicator" style="transform: rotate(-90deg);"></div>
                            </div>
                        </div>
                        <div class="knob-value">0.6</div>
                    </div>
                    <div class="knob-control">
                        <div class="knob-label">Detune</div>
                        <div class="knob-container" data-param="detune" data-value="5">
                            <div class="knob-circle">
                                <div class="knob-indicator" style="transform: rotate(0deg);"></div>
                            </div>
                        </div>
                        <div class="knob-value">5</div>
                    </div>
                </div>
            </div>

            <!-- Filter -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-icon">üéõÔ∏è</div>
                    <h2 class="panel-title">FILTER</h2>
                </div>
                <div class="knob-controls">
                    <div class="knob-control">
                        <div class="knob-label">Cutoff</div>
                        <div class="knob-container" data-param="cutoff" data-value="1000">
                            <div class="knob-circle">
                                <div class="knob-indicator" style="transform: rotate(0deg);"></div>
                            </div>
                        </div>
                        <div class="knob-value">1000</div>
                    </div>
                    <div class="knob-control">
                        <div class="knob-label">Resonance</div>
                        <div class="knob-container" data-param="resonance" data-value="5">
                            <div class="knob-circle">
                                <div class="knob-indicator" style="transform: rotate(-90deg);"></div>
                            </div>
                        </div>
                        <div class="knob-value">5</div>
                    </div>
                    <div class="knob-control">
                        <div class="knob-label">Env Amount</div>
                        <div class="knob-container" data-param="envAmount" data-value="0.5">
                            <div class="knob-circle">
                                <div class="knob-indicator" style="transform: rotate(-45deg);"></div>
                            </div>
                        </div>
                        <div class="knob-value">0.5</div>
                    </div>
                </div>
            </div>

            <!-- ADSR Envelope -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-icon">üìä</div>
                    <h2 class="panel-title">ENVELOPE (ADSR)</h2>
                </div>
                <div class="knob-controls">
                    <div class="knob-control">
                        <div class="knob-label">Attack</div>
                        <div class="knob-container" data-param="attack" data-value="0.01">
                            <div class="knob-circle">
                                <div class="knob-indicator" style="transform: rotate(-135deg);"></div>
                            </div>
                        </div>
                        <div class="knob-value">0.01s</div>
                    </div>
                    <div class="knob-control">
                        <div class="knob-label">Decay</div>
                        <div class="knob-container" data-param="decay" data-value="0.3">
                            <div class="knob-circle">
                                <div class="knob-indicator" style="transform: rotate(-90deg);"></div>
                            </div>
                        </div>
                        <div class="knob-value">0.3s</div>
                    </div>
                    <div class="knob-control">
                        <div class="knob-label">Sustain</div>
                        <div class="knob-container" data-param="sustain" data-value="0.7">
                            <div class="knob-circle">
                                <div class="knob-indicator" style="transform: rotate(0deg);"></div>
                            </div>
                        </div>
                        <div class="knob-value">0.7</div>
                    </div>
                    <div class="knob-control">
                        <div class="knob-label">Release</div>
                        <div class="knob-container" data-param="release" data-value="0.5">
                            <div class="knob-circle">
                                <div class="knob-indicator" style="transform: rotate(45deg);"></div>
                            </div>
                        </div>
                        <div class="knob-value">0.5s</div>
                    </div>
                </div>
            </div>

            <!-- Effects -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-icon">‚ú®</div>
                    <h2 class="panel-title">EFFECTS</h2>
                </div>
                <div class="knob-controls">
                    <div class="knob-control">
                        <div class="knob-label">Distortion</div>
                        <div class="knob-container" data-param="distortion" data-value="20">
                            <div class="knob-circle">
                                <div class="knob-indicator" style="transform: rotate(-90deg);"></div>
                            </div>
                        </div>
                        <div class="knob-value">20</div>
                    </div>
                    <div class="knob-control">
                        <div class="knob-label">Chorus</div>
                        <div class="knob-container" data-param="chorus" data-value="30">
                            <div class="knob-circle">
                                <div class="knob-indicator" style="transform: rotate(-60deg);"></div>
                            </div>
                        </div>
                        <div class="knob-value">30</div>
                    </div>
                    <div class="knob-control">
                        <div class="knob-label">Compression</div>
                        <div class="knob-container" data-param="compression" data-value="50">
                            <div class="knob-circle">
                                <div class="knob-indicator" style="transform: rotate(-45deg);"></div>
                            </div>
                        </div>
                        <div class="knob-value">50</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Visualizer -->
        <div class="panel">
            <div class="panel-header">
                <div class="panel-icon">üìä</div>
                <h2 class="panel-title">WAVEFORM</h2>
            </div>
            <div class="visualizer">
                <canvas id="waveformCanvas"></canvas>
            </div>
        </div>

        <!-- Transport Controls -->
        <div class="transport-controls">
            <button class="transport-btn" id="playBtn">‚ñ∂</button>
            <button class="transport-btn" id="stopBtn">‚ñ†</button>
            <button class="transport-btn" id="recordBtn">‚è∫</button>
        </div>

        <!-- Export Panel -->
        <div class="panel">
            <div class="panel-header">
                <div class="panel-icon">üíæ</div>
                <h2 class="panel-title">EXPORT & SAVE</h2>
            </div>
            <div class="export-buttons">
                <button class="export-btn" id="exportWAV">üìÅ Export WAV</button>
                <button class="export-btn" id="exportMIDI">üéπ Export MIDI</button>
                <button class="export-btn" id="savePreset">üíæ Save Preset</button>
                <button class="export-btn" id="loadPreset">üìÇ Load Preset</button>
            </div>
        </div>
    </main>

    <!-- Three.js for 3D visualization -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- 3D Bass Guitar Visualization -->
    <script>
        // Initialize 3D Bass Guitar
        const canvas = document.getElementById('bassCanvas');
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x050508);
        scene.fog = new THREE.Fog(0x050508, 10, 50);

        const camera = new THREE.PerspectiveCamera(45, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
        camera.position.set(0, 2, 8);
        camera.lookAt(0, 0, 0);

        const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
        renderer.setSize(canvas.clientWidth, canvas.clientHeight);
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;

        // Ambient light
        const ambientLight = new THREE.AmbientLight(0x39ff14, 0.3);
        scene.add(ambientLight);

        // Green accent lights
        const spotLight1 = new THREE.SpotLight(0x39ff14, 1.5);
        spotLight1.position.set(5, 10, 5);
        spotLight1.castShadow = true;
        spotLight1.angle = Math.PI / 6;
        spotLight1.penumbra = 0.5;
        scene.add(spotLight1);

        const spotLight2 = new THREE.SpotLight(0x4aff14, 1.2);
        spotLight2.position.set(-5, 8, 3);
        spotLight2.angle = Math.PI / 5;
        scene.add(spotLight2);

        // Bass Guitar Body
        const bodyGeometry = new THREE.BoxGeometry(2.5, 0.3, 1.2);
        const bodyMaterial = new THREE.MeshPhysicalMaterial({
            color: 0x0a0a0a,
            metalness: 0.8,
            roughness: 0.2,
            clearcoat: 1.0,
            clearcoatRoughness: 0.1,
            emissive: 0x39ff14,
            emissiveIntensity: 0.1
        });
        const bassBody = new THREE.Mesh(bodyGeometry, bodyMaterial);
        bassBody.castShadow = true;
        bassBody.receiveShadow = true;
        scene.add(bassBody);

        // Bass Neck
        const neckGeometry = new THREE.BoxGeometry(4, 0.15, 0.4);
        const neckMaterial = new THREE.MeshPhysicalMaterial({
            color: 0x2a1810,
            metalness: 0.3,
            roughness: 0.7
        });
        const bassNeck = new THREE.Mesh(neckGeometry, neckMaterial);
        bassNeck.position.set(3, 0, 0);
        bassNeck.castShadow = true;
        scene.add(bassNeck);

        // Headstock
        const headstockGeometry = new THREE.BoxGeometry(0.6, 0.2, 0.5);
        const headstockMaterial = new THREE.MeshPhysicalMaterial({
            color: 0x0a0a0a,
            metalness: 0.9,
            roughness: 0.1
        });
        const headstock = new THREE.Mesh(headstockGeometry, headstockMaterial);
        headstock.position.set(5.3, 0, 0);
        headstock.castShadow = true;
        scene.add(headstock);

        // Bass Strings (4 strings)
        const stringMaterial = new THREE.MeshPhysicalMaterial({
            color: 0xc0c0c0,
            metalness: 1.0,
            roughness: 0.1,
            emissive: 0x39ff14,
            emissiveIntensity: 0.3
        });

        const strings = [];
        const stringPositions = [-0.15, -0.05, 0.05, 0.15];
        
        stringPositions.forEach((zPos, index) => {
            const stringGeometry = new THREE.CylinderGeometry(0.008, 0.008, 6.5, 8);
            const string = new THREE.Mesh(stringGeometry, stringMaterial.clone());
            string.rotation.z = Math.PI / 2;
            string.position.set(1.5, 0, zPos);
            string.castShadow = true;
            strings.push(string);
            scene.add(string);
        });

        // Pickups
        const pickupGeometry = new THREE.BoxGeometry(0.8, 0.1, 0.5);
        const pickupMaterial = new THREE.MeshPhysicalMaterial({
            color: 0x1a1a1a,
            metalness: 0.9,
            roughness: 0.3,
            emissive: 0x39ff14,
            emissiveIntensity: 0.4
        });
        
        const pickup1 = new THREE.Mesh(pickupGeometry, pickupMaterial);
        pickup1.position.set(-0.5, 0, 0);
        scene.add(pickup1);

        const pickup2 = new THREE.Mesh(pickupGeometry, pickupMaterial);
        pickup2.position.set(0.8, 0, 0);
        scene.add(pickup2);

        // Bridge
        const bridgeGeometry = new THREE.BoxGeometry(0.8, 0.12, 1.0);
        const bridgeMaterial = new THREE.MeshPhysicalMaterial({
            color: 0x808080,
            metalness: 1.0,
            roughness: 0.2
        });
        const bridge = new THREE.Mesh(bridgeGeometry, bridgeMaterial);
        bridge.position.set(-1.2, 0, 0);
        scene.add(bridge);

        // Frets
        const fretMaterial = new THREE.MeshPhysicalMaterial({
            color: 0xd0d0d0,
            metalness: 1.0,
            roughness: 0.1
        });

        for (let i = 0; i < 20; i++) {
            const fretGeometry = new THREE.CylinderGeometry(0.015, 0.015, 0.4, 8);
            const fret = new THREE.Mesh(fretGeometry, fretMaterial);
            fret.rotation.z = Math.PI / 2;
            fret.position.set(1 + (i * 0.2), 0.08, 0);
            scene.add(fret);
        }

        // Animated particles
        const particleCount = 100;
        const particles = new THREE.BufferGeometry();
        const particlePositions = [];
        const particleVelocities = [];

        for (let i = 0; i < particleCount; i++) {
            particlePositions.push(
                (Math.random() - 0.5) * 15,
                (Math.random() - 0.5) * 10,
                (Math.random() - 0.5) * 15
            );
            particleVelocities.push(
                (Math.random() - 0.5) * 0.02,
                (Math.random() - 0.5) * 0.02,
                (Math.random() - 0.5) * 0.02
            );
        }

        particles.setAttribute('position', new THREE.Float32BufferAttribute(particlePositions, 3));
        const particleMaterial = new THREE.PointsMaterial({
            color: 0x39ff14,
            size: 0.05,
            transparent: true,
            opacity: 0.6,
            blending: THREE.AdditiveBlending
        });
        const particleSystem = new THREE.Points(particles, particleMaterial);
        scene.add(particleSystem);

        // Animation variables
        let time = 0;
        let stringVibrations = [0, 0, 0, 0];

        // String vibration function
        function vibrateString(stringIndex) {
            stringVibrations[stringIndex] = 0.3;
        }

        // Auto-play animation
        let autoPlayTimer = 0;
        const autoPlayInterval = 120;

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);
            time += 0.01;
            autoPlayTimer++;

            // Rotate bass slowly
            bassBody.rotation.y += 0.003;
            bassNeck.rotation.y += 0.003;
            headstock.rotation.y += 0.003;
            pickup1.rotation.y += 0.003;
            pickup2.rotation.y += 0.003;
            bridge.rotation.y += 0.003;

            // Rotate strings
            strings.forEach((string, index) => {
                string.rotation.z = bassBody.rotation.y + Math.PI / 2;
                string.position.x = 1.5 * Math.cos(bassBody.rotation.y) - stringPositions[index] * Math.sin(bassBody.rotation.y);
                string.position.z = 1.5 * Math.sin(bassBody.rotation.y) + stringPositions[index] * Math.cos(bassBody.rotation.y);
                
                // String vibration
                if (stringVibrations[index] > 0) {
                    string.position.y = Math.sin(time * 50) * stringVibrations[index] * 0.1;
                    stringVibrations[index] *= 0.95;
                    string.material.emissiveIntensity = 0.8 * stringVibrations[index];
                } else {
                    string.position.y = 0;
                    string.material.emissiveIntensity = 0.3;
                }
            });

            // Auto-play strings
            if (autoPlayTimer % autoPlayInterval === 0) {
                const randomString = Math.floor(Math.random() * 4);
                vibrateString(randomString);
            }

            // Animate particles
            const positions = particles.attributes.position.array;
            for (let i = 0; i < particleCount * 3; i += 3) {
                positions[i] += particleVelocities[i / 3];
                positions[i + 1] += particleVelocities[Math.floor(i / 3)] * 0.5;
                positions[i + 2] += particleVelocities[Math.floor(i / 3)] * 0.7;

                // Reset particles
                if (Math.abs(positions[i]) > 8 || Math.abs(positions[i + 1]) > 5 || Math.abs(positions[i + 2]) > 8) {
                    positions[i] = (Math.random() - 0.5) * 2;
                    positions[i + 1] = (Math.random() - 0.5) * 2;
                    positions[i + 2] = (Math.random() - 0.5) * 2;
                }
            }
            particles.attributes.position.needsUpdate = true;

            // Pulse lights
            spotLight1.intensity = 1.5 + Math.sin(time * 2) * 0.3;
            spotLight2.intensity = 1.2 + Math.cos(time * 2.5) * 0.3;

            renderer.render(scene, camera);
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            const width = canvas.clientWidth;
            const height = canvas.clientHeight;
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            renderer.setSize(width, height);
        });

        // Start animation
        animate();

        // Trigger string vibration on note play
        window.addEventListener('bassNotePlay', (e) => {
            const stringIndex = e.detail.note % 4;
            vibrateString(stringIndex);
        });
    </script>

    <script src="/js/bass-engine.js"></script>
</body>
</html>
