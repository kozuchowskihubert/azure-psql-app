# Environment Variables Template for Calendar & SSO Features

# ============================================================================
# Application Settings
# ============================================================================
NODE_ENV=development
APP_URL=http://localhost:3000
PORT=3000

# ============================================================================
# Database Configuration
# ============================================================================
DB_HOST=your-postgresql-server.postgres.database.azure.com
DB_PORT=5432
DB_NAME=notesdb
DB_USER=your-db-user
DB_PASSWORD=your-db-password
DB_SSL=true

# ============================================================================
# Session & Security
# ============================================================================
SESSION_SECRET=your-super-secret-session-key-change-this-in-production
ENCRYPTION_KEY=your-32-byte-hex-encryption-key-for-tokens

# ============================================================================
# Azure AD SSO Configuration
# ============================================================================
AZURE_AD_CLIENT_ID=your-azure-ad-application-client-id
AZURE_AD_CLIENT_SECRET=your-azure-ad-application-secret
AZURE_AD_TENANT_ID=common
# Use 'common' for multi-tenant, or your specific tenant ID

# Azure AD OAuth Endpoints (auto-configured):
# - Authorization: https://login.microsoftonline.com/{tenant}/oauth2/v2.0/authorize
# - Token: https://login.microsoftonline.com/{tenant}/oauth2/v2.0/token

# ============================================================================
# Google OAuth Configuration
# ============================================================================
GOOGLE_CLIENT_ID=your-google-oauth-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-oauth-client-secret

# Google OAuth Endpoints (auto-configured):
# - Authorization: https://accounts.google.com/o/oauth2/v2/auth
# - Token: https://oauth2.googleapis.com/token
# - Calendar API: https://www.googleapis.com/calendar/v3

# ============================================================================
# Facebook OAuth Configuration
# ============================================================================
FACEBOOK_APP_ID=your-facebook-app-id
FACEBOOK_APP_SECRET=your-facebook-app-secret
FACEBOOK_CALLBACK_URL=https://haos.fm/api/auth/facebook/callback

# Facebook OAuth Endpoints (auto-configured):
# - Authorization: https://www.facebook.com/v18.0/dialog/oauth
# - Token: https://graph.facebook.com/v18.0/oauth/access_token

# ============================================================================
# External Calendar APIs
# ============================================================================

# Microsoft Graph API
MICROSOFT_GRAPH_API_URL=https://graph.microsoft.com/v1.0
MICROSOFT_CALENDAR_SCOPES=Calendars.ReadWrite,Calendars.ReadWrite.Shared

# Google Calendar API
GOOGLE_CALENDAR_API_URL=https://www.googleapis.com/calendar/v3
GOOGLE_CALENDAR_SCOPES=https://www.googleapis.com/auth/calendar

# ============================================================================
# Virtual Meeting Integration
# ============================================================================

# Zoom API (optional)
ZOOM_API_KEY=your-zoom-api-key
ZOOM_API_SECRET=your-zoom-api-secret
ZOOM_WEBHOOK_SECRET=your-zoom-webhook-secret

# Microsoft Teams (uses Graph API - same as above)
TEAMS_ENABLED=true

# ============================================================================
# Email Notifications (SendGrid)
# ============================================================================
SENDGRID_API_KEY=your-sendgrid-api-key
SENDGRID_FROM_EMAIL=noreply@yourapp.com
SENDGRID_FROM_NAME=Notes App

# Alternative: AWS SES
# AWS_SES_REGION=us-east-1
# AWS_SES_ACCESS_KEY=your-aws-access-key
# AWS_SES_SECRET_KEY=your-aws-secret-key

# ============================================================================
# Push Notifications (Firebase)
# ============================================================================
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_PRIVATE_KEY=your-firebase-private-key
FIREBASE_CLIENT_EMAIL=your-firebase-client-email

# ============================================================================
# Sync & Background Jobs
# ============================================================================
CALENDAR_SYNC_INTERVAL_MINUTES=15
ENABLE_BACKGROUND_SYNC=true
CLEANUP_OLD_SESSIONS_DAYS=30

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_SSO=true
ENABLE_AZURE_AD=true
ENABLE_GOOGLE_OAUTH=true
ENABLE_CALENDAR_SYNC=true
ENABLE_MEETING_ROOMS=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_PUSH_NOTIFICATIONS=false

# ============================================================================
# Logging & Monitoring
# ============================================================================
LOG_LEVEL=info
# Options: error, warn, info, debug

# Application Insights (Azure)
APPINSIGHTS_INSTRUMENTATION_KEY=your-app-insights-key

# ============================================================================
# CORS & Security
# ============================================================================
CORS_ORIGIN=http://localhost:3000,https://yourapp.azurewebsites.net
RATE_LIMIT_WINDOW_MS=900000
# 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# ============================================================================
# HOW TO SET UP
# ============================================================================

# 1. Copy this file to .env:
#    cp .env.template .env

# 2. Fill in your values for each service

# 3. Generate encryption key:
#    node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

# 4. Azure AD Setup:
#    - Go to Azure Portal > Azure Active Directory > App registrations
#    - Create new registration
#    - Add redirect URI: http://localhost:3000/api/auth/callback/azure
#    - Create client secret
#    - Copy Application (client) ID and secret

# 5. Google OAuth Setup:
#    - Go to Google Cloud Console > APIs & Services > Credentials
#    - Create OAuth 2.0 Client ID
#    - Add authorized redirect URI: http://localhost:3000/api/auth/callback/google
#    - Enable Google Calendar API
#    - Copy Client ID and Client Secret

# 6. SendGrid Setup (for emails):
#    - Sign up at sendgrid.com
#    - Create API key with "Mail Send" permissions
#    - Verify sender email address

# 7. Never commit .env file to git!
#    Make sure .env is in your .gitignore
